# flutter_app

This is a Flutter application for image automatic upload, retrieval, and tag manipulation worker with our backend

## READING First

A few resources to get you started if this is your first Flutter project:

- [Lab: Write your first Flutter app](https://flutter.dev/docs/get-started/codelab)
- [Cookbook: Useful Flutter samples](https://flutter.dev/docs/cookbook)

For help getting started with Flutter, view our
[online documentation](https://flutter.dev/docs), which offers tutorials,
samples, guidance on mobile development, and a full API reference.

## Code Structure

This application employs [flutter\_redux](https://pub.dev/packages/flutter_redux)
It borrows lots of idea for code structure from [redux sample](https://github.com/brianegan/flutter_architecture_samples/tree/master/redux)

```
android/app/src/main/ #Android code written in kotlin
├── AndroidManifest.xml
├── assets #tensorflowlite pre-trained model
│   ├── labels_mobilenet_quant_v1_224.txt
│   └── mobilenet_v1_1.0_224_quant.tflite
├── java
│   ├── com
│   │   └── alexrhino
│   │       └── flutter_app
│   │           ├── JobIds.kt #Job ID defined for JobService
│   │           ├── MyReceiver.kt #Broadcast Receiver for boot on start
│   │           └── MyService.kt #JobService to run as background service
│   └── io
│       └── flutter
│           └── plugins
│               └── GeneratedPluginRegistrant.java
├── kotlin
│   └── com
│       └── alexrhino
│           └── flutter_app
│               ├── FlutterApplication.kt #Main entry for Flutter application
│               ├── ICBDbHelper.kt #sqlite database handler
│               ├── MainActivity.kt #Main activity contains methodchannel
│               ├── ProgressWorker.kt #Wokermanager for image processing, upload, metadata extraction, classification
│               └── UploadAllProgressWorker.kt #Similar with above, but process a sequence of images instead of single one
└── res
    ├── drawable
    │   └── launch_background.xml
    ├── mipmap-hdpi
    │   └── ic_launcher.png
    ├── mipmap-mdpi
    │   └── ic_launcher.png
    ├── mipmap-xhdpi
    │   └── ic_launcher.png
    ├── mipmap-xxhdpi
    │   └── ic_launcher.png
    ├── mipmap-xxxhdpi
    │   └── ic_launcher.png
    ├── values
    │   └── styles.xml
    └── xml
        ├── network_security_config.xml #Define whitelist ip as backend server
        └── provider_paths.xml 

```

```
lib/ #Dart code in Flutter
├── actions.dart # All actions in redux flow
├── app_state.dart # Main store for all state 
├── bottom_nav_bar.dart # navigation bar at bottom of main screen
├── database_handlers.dart # database handler
├── http_handlers.dart # http request handler
├── local_detail_page.dart 
├── local_detail_screen.dart # screen to view one local image
├── local_image_detail.dart # local image detail model to interact with methodchanel
├── local_image_detail.g.dart # autogenerated by json_annotation to transfer above object to json
├── local_images_info.dart #  local image list model to interact with methodchannel
├── local_images_info.g.dart # auto-generated
├── local_images_state.dart # state for local images
├── local_image_state.dart # state for single local image
├── local_sum_screen.dart # screen to view a summary of local images
├── local_sum_view.dart # modelview for local image
├── main.dart # main screen
├── middleware.dart # middleware to handle async request in redux, such as methodchannel call and http requests
├── nav_key.dart # global navigation key for router
├── reducers.dart # reducer in redux
├── remote_detail_screen.dart # view remote image detail
├── remote_images_state.dart # define a list of remote images state
├── remote_image_state.dart # define remote image state
├── remote_list_by_tag_screen.dart # screen to view image by tag
├── remote_sum_screen.dart # screen to view summary of remote images
├── remote_sum_view.dart # viewmodel for remote image summary
├── remote_tags_screen.dart # screen to view summary of remote tags
├── remote_tags_state.dart # state of remote tags
├── remote_tags_view.dart # viewmodel for remote tags
├── remote_zoomable_image_screen.dart # screen to provide zoomable view for remote image
├── setting_screen.dart # screen to modify settings, such as remote server ip, clear database
└── settings_state.dart # state to store setting info
```

